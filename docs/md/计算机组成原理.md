### 1.组成

计算机组成：控制器（cpu），运算器，存储器，输入和输出设备这5个。

cpu等于控制器加运算器。

存储器（内存），程序都是运行在内存中的，存储cpu运算中的一些数据。



### 2.什么是线程安全？如何保证线程安全呢？

多线程下，多个线程同时操作线程共用的变量时，很容易就出现线程不安全的问题。比如线程在执行完后，要给执行次数这个共用变量+1

线程A执行中，还没给执行次数加1时，线程b进来了。假设执行次数为0，其实B应该读到执行次数为1的，因为线程A比B先执行了，但此时B读取的还是0.这种问题就是线程不安全问题。



PHP 默认并不支持多线程，要使用多线程需要安装 pthread 扩展，而要安装 pthread 扩展，必须使用 `--enable-maintainer-zts` 参数重新编译 PHP，这个参数是指定编译 PHP 时使用线程安全方式。

PHP 实现的线程安全主要是使用 `TSRM` 机制对 `全局变量和静态变量进行了隔离`，将全局变量和静态变量 给每个线程都复制了一份，各线程使用的都是主线程的一个备份，从而避免了变量冲突，也就不会出现线程安全问题。

PHP 对多线程的封装保证了线程安全，程序员不用考虑对全局变量加各种锁来避免读写冲突了，同时也减少了出错的机会，写出的代码更加安全。

但由此导致的是，子线程一旦开始运行，主线程便无法再对子线程运行细节进行调整了，线程一定程度上失去了线程之间通过全局变量进行消息传递的能力。

同时 PHP 开启线程安全选项后，使用 `TSRM` 机制分配和使用变量时也会有额外的损耗，所以在不需要多线程的 PHP 环境中，使用 PHP 的 ZTS （非线程安全） 版本就好。

